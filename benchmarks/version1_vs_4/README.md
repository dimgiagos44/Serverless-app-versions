# Version1 (single/multi-node, single/multi-replicas) vs Version4 benchmarks

## Average results from Version1 vs Version4 with 4 different inputs with single node deployment (davinci), with Faas-Flow runtime

*Adding replicas to Version1's pods seems not to accelerate the execution. Check below why*

* Url1's duration = 180 seconds (0-180) with total 11 frames created & processed (1 per 15 seconds)
* Url4's duration = 280 seconds (0-280) with total 18 frames created & processed (1 per 15 seconds)
* Url5's duration = 500 seconds (0-500) with total 26 frames created & processed (1 per 15 seconds)
* Url6's duration = 500 seconds (0-500) with total 78 frames created & processed (1 per 5 seconds)

![Screenshot from 2022-02-04 10-38-27](https://user-images.githubusercontent.com/57920951/152516475-9b542414-3b81-4221-be99-28e5888d5744.png)

## Average results from Version1 (single/multi-node) vs Version4 (no pressures applied), with Faas-Flow runtime

1. *The weird thing here is that multi-replicas deployments are not faster than the single-replica deployment: No speedup achieved, thus no differences are spoted. The reason is because of [faas-flow's](https://github.com/s8sg/faas-flow) logic to invoke functions
synchronously and as a result the queue-worker (OpenFaas component) is unable to process requests concurrently*
2. *Version4 monolithic version scales way better mainly because of reduced traffic generated by faas-flow during its execution*

![version1-4-single-multi](https://user-images.githubusercontent.com/57920951/153644735-bdc69f30-88f3-4ba1-895e-eb1e7c49aebb.png)


## CPU - Memory Bandwidth - L3 cache pressure scenarios for Version1 (multiple queue-workers acceleration) and Version4, with custom runtime

### 0 - 0 - 0 cluster pressure 

![version1_4_000_pressure](https://user-images.githubusercontent.com/57920951/157099906-66a5022a-8d37-48a4-a6fd-77ebe4646bfa.png)


## CPU-MemBandwidth-LLC pressure scenarios for Version1 (single/multi-node) and Version4, with Faas-Flow runtime

| Single-node placement | Multi-node placement 1a | 1b | 1c | 1a x 3 | Version4 | 
| --- | --- | --- | --- | --- | --- |
| All functions &rarr; davinci | framer, mobilenet, version1b &rarr; davinci | framer, mobilenet, version1b, outputer &rarr; davinci| framer, facedetector &rarr; davinci | same as 1a | monolith &rarr; davinci  |
|  | facedetector, outputer &rarr; liono | facedetector, faceanalyzer, outputer &rarr; liono | faceanalyzer, mobilenet, outputer, version1b &rarr; liono| | | 
|  | faceanalyzer &rarr; coroni |  | |  | | 

#### 0-0-0 cluster pressure

![0_0_0_pressure](https://user-images.githubusercontent.com/57920951/155745027-1879e3f4-8b19-426f-b300-46bad4712e93.png)



#### 3CPU-0-0 cluster pressure

![3_0_0_pressure](https://user-images.githubusercontent.com/57920951/155745048-ae371fb0-66b5-4a11-a6f4-48ad99bce90e.png)


#### 0-3MemBand-0 cluster pressure

![0_3_0_pressure](https://user-images.githubusercontent.com/57920951/155745076-37b0ab61-369c-42b3-b069-f795a788429c.png)


#### 0-0-3LLCache cluster pressure

![0_0_3_pressure](https://user-images.githubusercontent.com/57920951/155745091-9f2bdda9-e460-4835-acd9-e9018259e4a8.png)


#### 1-1-1 cluster pressure

![1_1_1_pressure](https://user-images.githubusercontent.com/57920951/155745110-d6fd5769-b4e6-4e18-9600-c450c6e76987.png)

