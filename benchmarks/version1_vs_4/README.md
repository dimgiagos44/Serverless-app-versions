# Version1 (single/multi-node, single/multi-replicas) vs Version4 benchmarks

## Average results from version1 vs version4 with 4 different inputs with single node deployment (davinci)

*Adding replicas to Version1's pods seems not to accelerate the execution. Check below why*

* Url1's duration = 180 seconds (0-180) with total 11 frames created & processed (1 per 15 seconds)
* Url4's duration = 280 seconds (0-280) with total 18 frames created & processed (1 per 15 seconds)
* Url5's duration = 500 seconds (0-500) with total 26 frames created & processed (1 per 15 seconds)
* Url6's duration = 500 seconds (0-500) with total 78 frames created & processed (1 per 5 seconds)

![Screenshot from 2022-02-04 10-38-27](https://user-images.githubusercontent.com/57920951/152516475-9b542414-3b81-4221-be99-28e5888d5744.png)

## Average results from version1 (single/multi-node) vs version4 (no pressures applied)

1. *The weird thing here is that multi-replicas deployments are not faster than the single-replica deployment: No speedup achieved, thus no differences are spoted. The reason is because of [faas-flow's](https://github.com/s8sg/faas-flow) logic to invoke functions
synchronously and as a result the queue-worker (OpenFaas component) is unable to process requests concurrently*
2. *Version4 monolithic version scales way better mainly because of reduced traffic generated by faas-flow during its execution*

![version1-4-single-multi](https://user-images.githubusercontent.com/57920951/153644735-bdc69f30-88f3-4ba1-895e-eb1e7c49aebb.png)

## CPU-MemBandwidth-LLC pressure scenarios for Version1 (single/multi-node) and Version4

| Single-node placement | Multi-node placement |
| --- | --- |
| All functions &rarr; davinci | framer, mobilenet, version1b &rarr; davinci |
|  | facedetector, outputer &rarr; liono |
|  | faceanalyzer &rarr; coroni | 

#### 0-0-0 cluster pressure

![0_0_0_cluster_pressure](https://user-images.githubusercontent.com/57920951/154116994-b3e2e103-38b7-4e96-a6f8-619fde28532e.png)

#### 3CPU-0-0 cluster pressure

![3_0_0_cluster_pressure](https://user-images.githubusercontent.com/57920951/154298733-0c1b70ee-64df-492b-9127-8913a719dc4a.png)


#### 0-3MemBand-0 cluster pressure

![0_3_0_cluster_pressure](https://user-images.githubusercontent.com/57920951/154298766-013d69a7-702e-4192-8367-c02003f843c4.png)


#### 0-0-3LLCache cluster pressure

![0_0_3_cluster_pressure](https://user-images.githubusercontent.com/57920951/154260452-8a67c5e2-0304-4ba0-b994-8b6596c58181.png)

#### 1-1-1 cluster pressure

![1_1_1_cluster_pressure](https://user-images.githubusercontent.com/57920951/154334752-b4cf8d83-058e-48fb-87ba-1441770106c7.png)
